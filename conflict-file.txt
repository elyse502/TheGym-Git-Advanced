This is the resolved version combining both changes
This is the main branch version
